import"./hoisted.--sAeg4I.js";import"./hoisted.3kUHloEO.js";function m(){const i={threshold:.1,rootMargin:"0px 0px -50px 0px"},c=new IntersectionObserver(t=>{t.forEach(e=>{e.isIntersecting&&e.target.classList.add("visible")})},i);document.querySelectorAll(".scroll-fade").forEach(t=>{t.classList.remove("visible")}),document.querySelectorAll(".hero-section .scroll-fade").forEach(t=>{t.classList.add("visible")}),document.querySelectorAll(".scroll-fade").forEach(t=>{c.observe(t)}),setTimeout(()=>{document.querySelectorAll(".scroll-fade").forEach(t=>{const e=t.getBoundingClientRect(),o=window.innerHeight;e.top<o*.9&&t.classList.add("visible")})},100)}function f(){document.addEventListener("keydown",e=>{if(e.key==="Tab"&&document.body.classList.add("keyboard-navigation"),e.key==="Escape"&&document.querySelector(".nav-menu.active")){const l=document.getElementById("nav-close");l&&l.click()}}),document.addEventListener("mousedown",()=>{document.body.classList.remove("keyboard-navigation")});const i='a[href], button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex="-1"])';function c(e){const o=e.querySelectorAll(i),l=o[0],s=o[o.length-1];e.addEventListener("keydown",n=>{n.key==="Tab"&&(n.shiftKey?document.activeElement===l&&(n.preventDefault(),s.focus()):document.activeElement===s&&(n.preventDefault(),l.focus()))})}const r=document.getElementById("nav-menu");r&&c(r),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(o){const l=this.getAttribute("href");if(l==="#"||!l)return;o.preventDefault();const s=document.querySelector(l);s&&s instanceof HTMLElement&&(s.scrollIntoView({behavior:"smooth",block:"start"}),setTimeout(()=>{s.setAttribute("tabindex","-1"),s.focus(),s.addEventListener("blur",()=>{s.removeAttribute("tabindex")},{once:!0})},100))})});const t=document.createElement("div");t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.className="sr-only",t.id="page-announcer",document.body.appendChild(t),document.querySelectorAll(".app-preview-card").forEach(e=>{const o=e,l=o.dataset.app;o.setAttribute("tabindex","0"),o.setAttribute("role","button"),o.setAttribute("aria-label",`${l}アプリの詳細を見る`);function s(){const n=document.getElementById(`${l}-section`);n&&(n.scrollIntoView({behavior:"smooth"}),setTimeout(()=>{n.setAttribute("tabindex","-1"),n.focus()},100))}o.addEventListener("click",s),o.addEventListener("keydown",n=>{(n.key==="Enter"||n.key===" ")&&(n.preventDefault(),s())})})}function u(){const i=document.documentElement,c=document.body;i.style.overflow="auto",i.style.overflowX="hidden",i.style.scrollBehavior="smooth",i.style.height="auto",c.style.overflow="auto",c.style.overflowX="hidden",c.style.scrollBehavior="smooth",c.style.height="auto",c.style.minHeight="100vh",document.querySelectorAll(".hero-section, .apps-section, .riddle-section, .summaries-section, .prompty-section, .contact-section-wrapper").forEach((l,s)=>{const n=l;n.style.position="relative",n.style.overflow="visible",n.style.pointerEvents="auto",n.style.touchAction="pan-y",n.style.zIndex=String(s+1),n.style.transform="translateZ(0)",n.style.maxHeight="none",n.style.height="auto"});const t=document.querySelector(".home-main");t&&(t.style.overflow="visible",t.style.overflowX="hidden",t.style.height="auto",t.style.minHeight="100vh",t.style.position="relative");const e=document.querySelector(".header");e&&(e.style.position="fixed",e.style.zIndex="1000",e.style.pointerEvents="auto"),document.querySelectorAll(".section-content, .animated-content, .app-showcase, .contact-section").forEach(l=>{const s=l;s.style.pointerEvents="auto",s.style.touchAction="pan-y",s.style.position="relative"}),setTimeout(()=>{window.scrollTo(0,window.pageYOffset)},100)}function d(i,c){let r;return function(...e){const o=()=>{clearTimeout(r),i(...e)};clearTimeout(r),r=setTimeout(o,c)}}function h(){const i=d(()=>{const e=window.pageYOffset||document.documentElement.scrollTop,o=document.documentElement.scrollHeight,l=window.innerHeight,s=e/(o-l)*100;console.log("Scroll Debug:",{position:e,documentHeight:o,windowHeight:l,maxScroll:o-l,percentage:Math.round(s)})},100);window.addEventListener("scroll",i,{passive:!0});let c=0,r=0;const t=d(()=>{const e=window.pageYOffset||document.documentElement.scrollTop;Math.abs(e-c)<1?(r++,r>10&&(console.warn("Scroll appears to be stuck, attempting fix..."),u(),r=0)):r=0,c=e},500);window.addEventListener("scroll",t,{passive:!0})}function v(){"scrollRestoration"in history&&(history.scrollRestoration="manual"),window.addEventListener("load",()=>{const i=sessionStorage.getItem("scrollPosition");i&&setTimeout(()=>{window.scrollTo(0,parseInt(i,10)),sessionStorage.removeItem("scrollPosition")},100)}),window.addEventListener("beforeunload",()=>{sessionStorage.setItem("scrollPosition",String(window.pageYOffset))})}function a(){try{m(),f(),u(),v(),window.location.search.includes("debug=scroll")&&h(),setTimeout(()=>{const i=document.documentElement.scrollHeight,c=window.innerHeight;console.log("Page initialization complete. Document height:",i,"Window height:",c)},200)}catch(i){console.error("Error initializing page:",i)}}document.addEventListener("DOMContentLoaded",a);document.addEventListener("astro:page-load",a);document.addEventListener("visibilitychange",()=>{document.hidden||setTimeout(a,100)});window.addEventListener("pageshow",i=>{i.persisted&&setTimeout(a,100)});window.addEventListener("popstate",()=>{setTimeout(a,100)});document.readyState==="loading"?document.addEventListener("DOMContentLoaded",a):a();
