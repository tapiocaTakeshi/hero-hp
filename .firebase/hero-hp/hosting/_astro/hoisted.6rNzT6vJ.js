import"./hoisted.--sAeg4I.js";import"./hoisted.3kUHloEO.js";document.addEventListener("DOMContentLoaded",function(){const o=document.getElementById("contactForm"),m=document.querySelectorAll(".form-step"),f=document.querySelectorAll(".progress-indicator .step"),S=document.querySelectorAll(".next-step"),E=document.querySelectorAll(".prev-step"),a=document.getElementById("formStatus");let i=1;const q=m.length,r={};y(i),S.forEach(e=>{e.addEventListener("click",function(){const n=parseInt(e.getAttribute("data-next")||"1");g()&&(x(),u(n))})}),E.forEach(e=>{e.addEventListener("click",function(){const n=parseInt(e.getAttribute("data-prev")||"1");u(n)})}),L();const p=document.getElementById("message"),v=document.querySelector(".char-count");p&&v&&p.addEventListener("input",function(){v.textContent=String(this.value.length)}),o&&o.addEventListener("submit",function(e){e.preventDefault(),g()&&A()});function y(e){m.forEach((n,t)=>{n.classList.toggle("active",t+1===e)}),f.forEach((n,t)=>{const s=t+1;n.classList.toggle("active",s===e),n.classList.toggle("completed",s<e)}),i=e,e===3&&$()}function u(e){e>=1&&e<=q&&y(e)}function g(){const e=document.querySelector(`.form-step[data-step="${i}"]`);if(!e)return!1;const n=e.querySelectorAll("[required]");let t=!0;return n.forEach(s=>{l(s)||(t=!1)}),t}function l(e){const n=e.value.trim();e.name;let t=!0,s="";return e.classList.remove("valid","invalid"),d(e,"error"),d(e,"success"),e.hasAttribute("required")&&!n?(s="この項目は必須です",t=!1):e.type==="email"&&n?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)||(s="有効なメールアドレスを入力してください",t=!1):e.type==="tel"&&n?/^[\d\-\(\)\+\s]+$/.test(n)||(s="有効な電話番号を入力してください",t=!1):e.type==="radio"&&e.name==="service"&&(document.querySelector('input[name="service"]:checked')||(s="サービスを選択してください",t=!1)),t?(e.classList.add("valid"),n&&h(e,"success","✓")):(e.classList.add("invalid"),h(e,"error",s)),t}function h(e,n,t){const s=document.getElementById(`${e.id||e.name}-${n}`);s&&(s.textContent=t,s.classList.add("show"))}function d(e,n){const t=document.getElementById(`${e.id||e.name}-${n}`);t&&t.classList.remove("show")}function L(){if(!o)return;o.querySelectorAll("input, select, textarea").forEach(t=>{t.addEventListener("blur",()=>l(t)),t.addEventListener("input",()=>{t.classList.contains("invalid")&&l(t)})}),document.querySelectorAll('input[name="service"]').forEach(t=>{t.addEventListener("change",function(){d({name:"service"},"error")})})}function x(){const e=document.querySelector(`.form-step[data-step="${i}"]`);if(!e)return;e.querySelectorAll("input, select, textarea").forEach(t=>{const s=t;s.type==="radio"?s.checked&&(r[s.name]=s.value):s.type==="checkbox"?r[s.name]=s.checked:r[s.name]=s.value})}function $(){const e=document.querySelector(".summary-content");if(!e)return;let n="";r.name&&(n+=`<p><strong>お名前:</strong> ${r.name}</p>`),r.email&&(n+=`<p><strong>メールアドレス:</strong> ${r.email}</p>`),r.phone&&(n+=`<p><strong>電話番号:</strong> ${r.phone}</p>`),r.service&&(n+=`<p><strong>サービス:</strong> ${{riddle:"Riddle",prompty:"Prompty",summaries:"Summaries"}[r.service]}</p>`),r.inquiry_type&&(n+=`<p><strong>お問い合わせ種別:</strong> ${{general:"一般的なお問い合わせ",technical:"技術的な問題",feature:"機能リクエスト",business:"ビジネス関連",account:"アカウント関連",other:"その他"}[r.inquiry_type]}</p>`),e.innerHTML=n}function A(){if(!o||!a)return;a.className="form-status loading";const e=document.querySelector(".submit-button");e&&(e.disabled=!0);const n=new FormData(o);fetch(o.action||"/contact",{method:"POST",body:n}).then(t=>t.json()).then(t=>{if(t.success)a.className="form-status success",o.reset(),u(1);else throw new Error("Submission failed")}).catch(t=>{console.error("Form submission error:",t),a.className="form-status error"}).finally(()=>{e&&(e.disabled=!1)})}function b(){f.forEach((e,n)=>{e.addEventListener("keydown",function(t){const s=t;if(s.key==="Enter"||s.key===" "){t.preventDefault();const c=n+1;(c<=i||k(c-1))&&u(c)}})}),m.forEach(e=>{e.addEventListener("transitionend",function(){const n=this;if(n.classList.contains("active")){const t=n.querySelector("input, select, textarea");t&&t.focus()}})})}function k(e){for(let n=1;n<=e;n++){const t=document.querySelector(`.form-step[data-step="${n}"]`);if(!t)continue;const s=t.querySelectorAll("[required]");for(let c of s)if(!l(c))return!1}return!0}b()});
